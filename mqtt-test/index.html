<!DOCTYPE html> 
<html>
  <head>
    <meta charset="utf-8" />
    <title>Example</title>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
  </head>
  <body>
    <button id="button">Click Me</button><br>
  <div id="clock"></div>    
    <script>
function updateClock() {
  const now = new Date();
  const hours = now.getHours();
  const minutes = now.getMinutes();
  const seconds = now.getSeconds();
  
  // Format the time as needed
  const formattedTime = `${hours}:${minutes}:${seconds}`;
  client.publish("hello", "time: "+formattedTime+"<br>\n");

  // Update the HTML element to display the time
  document.getElementById('clock').textContent = formattedTime;
}

// Call updateClock every second (1000 milliseconds)
setInterval(updateClock, 1000);

// Initial call to display the time immediately
updateClock();

      document.write("<pre>");
      const client = mqtt.connect(
        "wss://public:public@public.cloud.shiftr.io",
        {
          clientId: "javascript",
        }
      );

      client.on("connect", function () {
        client.subscribe("hello");
        updateClock();
      });

      client.on("message", function (topic, message) {
       document.getElementById('clock').textContent = topic + ": " + message.toString()+"<br>\r\n");
      });

      document.querySelector("button").addEventListener("click", function () {
        client.publish("hello", "world");
      });


    </script>

  </body>
</html>
